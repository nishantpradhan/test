{
    "from": 0,
    "size": 7,
    "body":
    {
        "sort": [
        {
            "productName.keyword": "ASC"
        },
        {
            "transactionDate": "DESC"
        }],
        "query":
        {
            "bool":
            {
                "filter":
                {
                    "bool":
                    {
                        "must": [
                        {
                            "term":
                            {
                                "isActive": true
                            }
                        },
                        {
                            "term":
                            {
                                "isDummy": false
                            }
                        },
                        {
                            "terms":
                            {
                                "accountId": [7, 99]
                            }
                        },
                        {
                            "terms":
                            {
                                "appUserId": [17]
                            }
                        },
                        {
                            "terms":
                            {
                                "familyId": [8]
                            }
                        }]
                    }
                }
            }
        }
    }
}


{
    "from": ["assetName", "productName"],
    "size": "",
    "_source": [],
    "body":
    {
        "sort": [],
        "query":
        {
            "bool":
            {
                "filter":
                {
                    "bool":
                    {
                        "must": [
                        {
                            "terms":
                            {
                                "accountId": [16]
                            }
                        },
                        {
                            "terms":
                            {
                                "appUserId": [30]
                            }
                        },
                        {
                            "terms":
                            {
                                "familyId": [18]
                            }
                        },
                        {
                            "terms":
                            {
                                "productId": [5]
                            }
                        },
                        {
                            "term":
                            {
                                "goalId": -1
                            }
                        }]
                    }
                }
            }
        }
    }
}


{
   "from":0,
   "size":100,
   "body":{
      "sort":[

      ],
      "query":{
         "bool":{
            "filter":{
               "bool":{
                  "must":[
                     {
                        "terms":{
                           "productId":[
                              76
                           ]
                        }
                     },
                     {
                        "range":{
                           "transactionDate":{
                              "gte":"0092-01-01",
                              "lte":"0106-01-01"
                           }
                        }
                     }
                  ]
               }
            }
         }
      },
      "aggs":{
         "instrumentWise":{
            "terms":{
               "field":"instrumentId",
               "size":100,
               "order":{
                  "totalCurrentValue":"DESC"
               }
            },
            "aggs":{
               "totalCurrentValue":{
                  "sum":{
                     "field":"totalCurrentValue"
                  }
               },
               "results":{
                  "top_hits":{
                     "sort":[
                        {
                           "instrumentId":"ASC"
                        }
                     ],
                     "_source":[
                        "_id",
                        "instrumentId",
                        "instrumentName",
                        "totalCurrentValue",
                        "instrumentCategoryId",
                        "instrumentCategoryName"
                     ],
                     "size":1
                  }
               }
            }
         },
         "totalCurrentValue":{
            "sum":{
               "field":"totalCurrentValue"
            }
         },
         "totalInstrumentCount":{
            "cardinality":{
               "field":"instrumentId"
            }
         }
      }
   }
}





















